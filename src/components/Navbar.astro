---
const navItems = [
  { name: "Home", path: "/" },
  { name: "Progetti", path: "/projects" },
  { name: "Chi Sono", path: "/about" },
  { name: "Contatti", path: "/contatti" },
];

const pathname = new URL(Astro.request.url).pathname;
---

<nav
  class="fixed w-full z-50 top-0 start-0 border-b border-white/10 bg-slate-950/80 backdrop-blur-md"
>
  <div
    class="max-w-7xl mx-auto flex flex-wrap items-center justify-between mx-auto p-4"
  >
    <a href="/" class="flex items-center space-x-3 rtl:space-x-reverse group">
      <span
        class="self-center text-2xl font-bold whitespace-nowrap text-white group-hover:text-cyan-400 transition-colors duration-300"
        >Antonio.<span class="text-cyan-400">dev</span></span
      >
    </a>
    <button
      data-collapse-toggle="navbar-default"
      type="button"
      class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-400 rounded-lg md:hidden hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-600"
      aria-controls="navbar-default"
      aria-expanded="false"
    >
      <span class="sr-only">Open main menu</span>
      <svg
        class="w-5 h-5"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 17 14"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M1 1h15M1 7h15M1 13h15"></path>
      </svg>
    </button>
    <div class="hidden w-full md:block md:w-auto" id="navbar-default">
      <ul
        class="font-medium flex flex-col p-4 md:p-0 mt-4 border border-gray-800 rounded-lg bg-slate-900 md:bg-transparent md:flex-row md:space-x-8 rtl:space-x-reverse md:mt-0 md:border-0"
      >
        {
          navItems.map((item) => {
            const isActive =
              pathname === item.path ||
              (item.path !== "/" && pathname.startsWith(item.path));
            return (
              <li>
                <a
                  href={item.path}
                  class={`block py-2 px-3 rounded md:p-0 transition-colors duration-300 ${isActive ? "text-cyan-400 font-semibold" : "text-gray-300 hover:text-cyan-400"}`}
                  aria-current={isActive ? "page" : undefined}
                >
                  {item.name}
                </a>
              </li>
            );
          })
        }
        <li>
          <a
            href="/cv-antonio-darrigo.pdf"
            download
            class="flex items-center gap-2 py-2 px-3 md:px-4 md:py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors duration-300 group"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="group-hover:scale-110 transition-transform"
            >
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" x2="12" y1="15" y2="3"></line>
            </svg>
            Scarica CV
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<script>
  // Simple toggle for mobile menu
  const toggleBtn = document.querySelector(
    '[data-collapse-toggle="navbar-default"]',
  );
  const navbar = document.getElementById("navbar-default");

  if (toggleBtn && navbar) {
    toggleBtn.addEventListener("click", () => {
      navbar.classList.toggle("hidden");
    });
  }
</script>
